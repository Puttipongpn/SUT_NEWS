<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
  <link rel="stylesheet" href="/stylesheets/splide.min.css">
  <link rel="stylesheet" href="/stylesheets/card.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" rel="stylesheet">
  <link href="http://fonts.googleapis.com/css?family=Roboto:400,700,300" rel="stylesheet" type="text/css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <style>
    .container {
      background-color: rgb(167, 167, 167);
      border-radius: 3%;
      margin-top: 4%;
    }

    .fresh-table {
      margin-top: 2%;
    }

    .float-right {
      padding: 1%;
    }

    .page-list {
      margin-top: 5%;
    }
  </style>
    <title>Document</title>
</head>
<body>
    <%- include('../home/header') %>
    <%- include('../home/nav') %>
    
      <div class="container">
        <h2 style="text-align: center; margin-top: 5%;"><b>History Approve</b></h2>
        <div class="fresh-table full-color-orange">
            <a class="btn btn-primary" href="/approve" role="button">Approve</a>
          <div class="table-responsive">
            <table id="fresh-table" class="table">
              <thead style="background-color: rgb(0, 0, 0);  color: #ffffff;">
                <th data-field="id">ID</th>
                <th data-field="newsid">News_ID</th>
                <th data-field="title">Title</th>
                <th data-field="welding">Welding</th>
                <th data-field="username">Writer</th>
                <th data-field="date">Post_Date</th>
                <th data-field="view" data-formatter="operateFormatter" data-events="operateEvents">View</th>
                <th data-field="decide" data-formatter="Formatter" data-events="operateEvents">Decide</th>
              </thead>
              <tbody style="background-color: rgb(235, 235, 235);">
                <% index=0 %>
                  <% approve.forEach((approve,index)=> { %>
                    <tr>
                      <td> <%- index+1 %></td>
                      <td><%- approve.news_id %></td>
                      <td><%- approve.title %></td>
                      <td><%- approve.welding_para %></td>
                      <td><%- approve.user_name %></td>
                      <td><%- approve.formattedDate %></td>
                      <td></td>
                      <td></td>
                    </tr>
                    <% }) %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <%- include('../home/footer') %>
</body>

<!-- Javascript -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/bootstrap-table/dist/bootstrap-table.min.js"></script>

<script type="text/javascript">
  var $table = $('#fresh-table')
  var $alertBtn = $('#alertBtn')

  window.operateEvents = {
    'click .like': function (e, value, row, index) {
      alert('You click like icon, row: ' + JSON.stringify(row))
      console.log(value, row, index)
    },
    'click .view': function (e, value, row, index) {
      const newsId = row.newsid;
      window.location.href = `/details/${newsId}`;
    },
    'click .decide': function (e, value, row, index) {
      const newsId = row.newsid;
      window.location.href = `/approve/${newsId}`;
    }
  }

  function operateFormatter(value, row, index) {
    return [
      '<a rel="tooltip" title="View" class="table-action view" href="javascript:void(0)" title="View">',
      '<i class="bi bi-arrow-up-right-circle"style="font-size: 30px";></i>',
      '</a>',
      '<a rel="tooltip" title="Decide" class="table-action decide" href="javascript:void(0)" title="Decide">',
      '',
      '</a>'
    ].join('')
  }
  function Formatter(value, row, index) {
    return [
      '<a rel="tooltip" title="Decide" class="table-action decide" href="javascript:void(0)" title="Decide">',
      '<i class="bi bi-arrow-up-circle"style="font-size: 30px";></i>',
      '</a>'
    ].join('')
  }

  $(function () {
    $table.bootstrapTable({
      classes: 'table table-hover table-striped',
      toolbar: '.toolbar',

      search: true,
      showRefresh: true,
      showToggle: true,
      showColumns: true,
      pagination: true,
      striped: true,
      sortable: true,
      pageSize: 8,
      pageList: [8, 10, 25, 50, 100],

      formatShowingRows: function (pageFrom, pageTo, totalRows) {
        return ''
      },
      formatRecordsPerPage: function (pageNumber) {
        return pageNumber + ' rows visible'
      }
    })

    $alertBtn.click(function () {
      alert('You pressed on Alert')
    })
  })

</script>
</html>